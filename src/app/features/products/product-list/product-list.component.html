<section aria-labelledby="products-heading" class="products-root container">
  <h1 id="products-heading">Productos</h1>

  <!-- Async pipe maneja la suscripción y desencadena CD en OnPush -->
  <ng-container *ngIf="products$ | async as products; else loadingTpl">
    <div *ngIf="products.length === 0; else gridTpl" class="empty">
      No hay productos por el momento.
    </div>
  </ng-container>

  <ng-template #loadingTpl>
    <div class="loading">Cargando productos…</div>
  </ng-template>

  <ng-template #gridTpl>
    <div class="grid" role="list">
      <!-- si ProductCard es standalone, está importado en el componente -->
      <app-product-card *ngFor="let p of (products$ | async)" [product]="p"></app-product-card>
    </div>
  </ng-template>
</section>


